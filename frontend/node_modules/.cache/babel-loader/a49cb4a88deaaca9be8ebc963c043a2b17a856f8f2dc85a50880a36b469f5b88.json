{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"users-container\"\n};\nconst _hoisted_2 = {\n  class: \"operation-bar\"\n};\nconst _hoisted_3 = {\n  class: \"pagination\"\n};\nconst _hoisted_4 = {\n  class: \"dialog-footer\"\n};\nconst _hoisted_5 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"box-card\"\n  }, {\n    header: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createElementVNode(\"div\", {\n      class: \"card-header\"\n    }, [_createElementVNode(\"span\", null, \"用户管理\")], -1 /* CACHED */)]))]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_input, {\n      modelValue: $setup.searchKeyword,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchKeyword = $event),\n      placeholder: \"搜索用户名或邮箱\",\n      style: {\n        \"width\": \"200px\"\n      },\n      clearable: \"\"\n    }, {\n      prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode($setup[\"Search\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleSearch\n    }, {\n      default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\"搜索\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"success\",\n      onClick: $setup.handleAdd\n    }, {\n      default: _withCtx(() => [...(_cache[15] || (_cache[15] = [_createTextVNode(\"添加用户\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"warning\",\n      onClick: $setup.handleImport\n    }, {\n      default: _withCtx(() => [...(_cache[16] || (_cache[16] = [_createTextVNode(\"导入\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"info\",\n      onClick: $setup.handleExport\n    }, {\n      default: _withCtx(() => [...(_cache[17] || (_cache[17] = [_createTextVNode(\"导出\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.userList,\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"username\",\n        label: \"用户名\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"email\",\n        label: \"邮箱\",\n        width: \"180\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"displayName\",\n        label: \"显示名称\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"role\",\n        label: \"角色\",\n        width: \"100\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tag, {\n          type: row.role === 'ADMIN' ? 'danger' : 'primary'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(row.role === 'ADMIN' ? '管理员' : '用户'), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"enabled\",\n        label: \"状态\",\n        width: \"100\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tag, {\n          type: row.enabled ? 'success' : 'info'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(row.enabled ? '激活' : '未激活'), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"createTime\",\n        label: \"创建时间\",\n        width: \"180\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"lastLoginTime\",\n        label: \"最后登录\",\n        width: \"180\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"200\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $event => $setup.handleEdit(row)\n        }, {\n          default: _withCtx(() => [...(_cache[18] || (_cache[18] = [_createTextVNode(\"编辑\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          size: \"small\",\n          type: \"danger\",\n          onClick: $event => $setup.handleDelete(row)\n        }, {\n          default: _withCtx(() => [...(_cache[19] || (_cache[19] = [_createTextVNode(\"删除\", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $setup.loading]]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_pagination, {\n      \"current-page\": $setup.currentPage,\n      \"onUpdate:currentPage\": _cache[1] || (_cache[1] = $event => $setup.currentPage = $event),\n      \"page-size\": $setup.pageSize,\n      \"onUpdate:pageSize\": _cache[2] || (_cache[2] = $event => $setup.pageSize = $event),\n      \"page-sizes\": [10, 20, 50, 100],\n      total: $setup.total,\n      layout: \"total, sizes, prev, pager, next, jumper\",\n      onSizeChange: $setup.handleSizeChange,\n      onCurrentChange: $setup.handleCurrentChange\n    }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\"])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 用户表单对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.dialogVisible,\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.dialogVisible = $event),\n    title: $setup.dialogTitle,\n    width: \"500px\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_4, [_createVNode(_component_el_button, {\n      onClick: _cache[9] || (_cache[9] = $event => $setup.dialogVisible = false)\n    }, {\n      default: _withCtx(() => [...(_cache[20] || (_cache[20] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleSave\n    }, {\n      default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\"确定\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      ref: \"userFormRef\",\n      model: $setup.userForm,\n      rules: $setup.userRules,\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"用户名\",\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.userForm.username,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.userForm.username = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"邮箱\",\n        prop: \"email\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.userForm.email,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.userForm.email = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"显示名称\",\n        prop: \"displayName\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.userForm.displayName,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.userForm.displayName = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), !$setup.userForm.id ? (_openBlock(), _createBlock(_component_el_form_item, {\n        key: 0,\n        label: \"密码\",\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.userForm.password,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.userForm.password = $event),\n          type: \"password\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, {\n        label: \"角色\",\n        prop: \"role\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.userForm.role,\n          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.userForm.role = $event),\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"用户\",\n            value: \"USER\"\n          }), _createVNode(_component_el_option, {\n            label: \"管理员\",\n            value: \"ADMIN\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"状态\",\n        prop: \"enabled\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_switch, {\n          modelValue: $setup.userForm.enabled,\n          \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.userForm.enabled = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"]), _createCommentVNode(\" 导入对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.importDialogVisible,\n    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => $setup.importDialogVisible = $event),\n    title: \"导入用户\",\n    width: \"400px\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_5, [_createVNode(_component_el_button, {\n      onClick: _cache[11] || (_cache[11] = $event => $setup.importDialogVisible = false)\n    }, {\n      default: _withCtx(() => [...(_cache[24] || (_cache[24] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleImportSubmit\n    }, {\n      default: _withCtx(() => [...(_cache[25] || (_cache[25] = [_createTextVNode(\"确定\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    })])]),\n    default: _withCtx(() => [_createVNode(_component_el_upload, {\n      ref: \"uploadRef\",\n      class: \"upload-demo\",\n      drag: \"\",\n      \"auto-upload\": false,\n      limit: 1,\n      accept: \".xlsx,.xls\",\n      onChange: $setup.handleFileChange\n    }, {\n      tip: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createElementVNode(\"div\", {\n        class: \"el-upload__tip\"\n      }, \" 只能上传xlsx/xls文件 \", -1 /* CACHED */)]))]),\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"el-icon--upload\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"UploadFilled\"])]),\n        _: 1 /* STABLE */\n      }), _cache[23] || (_cache[23] = _createElementVNode(\"div\", {\n        class: \"el-upload__text\"\n      }, [_createTextVNode(\" 拖拽文件到此处或 \"), _createElementVNode(\"em\", null, \"点击上传\")], -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","_hoisted_2","_component_el_input","$setup","searchKeyword","$event","placeholder","style","clearable","prefix","_component_el_icon","_component_el_button","type","onClick","handleSearch","handleAdd","handleImport","handleExport","_createBlock","_component_el_table","data","userList","_component_el_table_column","prop","label","width","default","row","_component_el_tag","role","enabled","size","handleEdit","handleDelete","loading","_hoisted_3","_component_el_pagination","currentPage","pageSize","total","layout","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","_createCommentVNode","_component_el_dialog","dialogVisible","title","dialogTitle","footer","_hoisted_4","handleSave","_component_el_form","ref","model","userForm","rules","userRules","_component_el_form_item","username","email","displayName","id","password","_component_el_select","_component_el_option","value","_component_el_switch","importDialogVisible","_hoisted_5","handleImportSubmit","_component_el_upload","drag","limit","accept","onChange","handleFileChange","tip"],"sources":["/workspace/frontend/src/views/admin/Users.vue"],"sourcesContent":["<template>\n  <div class=\"users-container\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>用户管理</span>\n        </div>\n      </template>\n      \n      <!-- 搜索和操作栏 -->\n      <div class=\"operation-bar\">\n        <el-input\n          v-model=\"searchKeyword\"\n          placeholder=\"搜索用户名或邮箱\"\n          style=\"width: 200px;\"\n          clearable\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n        <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\n        <el-button type=\"success\" @click=\"handleAdd\">添加用户</el-button>\n        <el-button type=\"warning\" @click=\"handleImport\">导入</el-button>\n        <el-button type=\"info\" @click=\"handleExport\">导出</el-button>\n      </div>\n\n      <!-- 用户表格 -->\n      <el-table :data=\"userList\" style=\"width: 100%\" v-loading=\"loading\">\n        <el-table-column prop=\"username\" label=\"用户名\" width=\"120\" />\n        <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\" />\n        <el-table-column prop=\"displayName\" label=\"显示名称\" width=\"120\" />\n        <el-table-column prop=\"role\" label=\"角色\" width=\"100\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.role === 'ADMIN' ? 'danger' : 'primary'\">\n              {{ row.role === 'ADMIN' ? '管理员' : '用户' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"enabled\" label=\"状态\" width=\"100\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.enabled ? 'success' : 'info'\">\n              {{ row.enabled ? '激活' : '未激活' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\" />\n        <el-table-column prop=\"lastLoginTime\" label=\"最后登录\" width=\"180\" />\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"{ row }\">\n            <el-button size=\"small\" @click=\"handleEdit(row)\">编辑</el-button>\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination\">\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :total=\"total\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n    </el-card>\n\n    <!-- 用户表单对话框 -->\n    <el-dialog\n      v-model=\"dialogVisible\"\n      :title=\"dialogTitle\"\n      width=\"500px\"\n    >\n      <el-form\n        ref=\"userFormRef\"\n        :model=\"userForm\"\n        :rules=\"userRules\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"userForm.username\" />\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"userForm.email\" />\n        </el-form-item>\n        <el-form-item label=\"显示名称\" prop=\"displayName\">\n          <el-input v-model=\"userForm.displayName\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"!userForm.id\">\n          <el-input v-model=\"userForm.password\" type=\"password\" />\n        </el-form-item>\n        <el-form-item label=\"角色\" prop=\"role\">\n          <el-select v-model=\"userForm.role\" style=\"width: 100%\">\n            <el-option label=\"用户\" value=\"USER\" />\n            <el-option label=\"管理员\" value=\"ADMIN\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"enabled\">\n          <el-switch v-model=\"userForm.enabled\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"handleSave\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n    <!-- 导入对话框 -->\n    <el-dialog\n      v-model=\"importDialogVisible\"\n      title=\"导入用户\"\n      width=\"400px\"\n    >\n      <el-upload\n        ref=\"uploadRef\"\n        class=\"upload-demo\"\n        drag\n        :auto-upload=\"false\"\n        :limit=\"1\"\n        accept=\".xlsx,.xls\"\n        @change=\"handleFileChange\"\n      >\n        <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n        <div class=\"el-upload__text\">\n          拖拽文件到此处或 <em>点击上传</em>\n        </div>\n        <template #tip>\n          <div class=\"el-upload__tip\">\n            只能上传xlsx/xls文件\n          </div>\n        </template>\n      </el-upload>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"importDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"handleImportSubmit\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, UploadFilled } from '@element-plus/icons-vue'\nimport { getUserList, createUser, updateUser, deleteUser, importUsers, exportUsers } from '@/api/admin'\n\n// 数据定义\nconst userList = ref([])\nconst loading = ref(false)\nconst searchKeyword = ref('')\nconst currentPage = ref(1)\nconst pageSize = ref(10)\nconst total = ref(0)\nconst dialogVisible = ref(false)\nconst dialogTitle = ref('')\nconst importDialogVisible = ref(false)\nconst uploadFile = ref(null)\n\n// 表单数据\nconst userForm = reactive({\n  id: null,\n  username: '',\n  email: '',\n  displayName: '',\n  password: '',\n  role: 'USER',\n  enabled: true\n})\n\n// 表单验证规则\nconst userRules = {\n  username: [\n    { required: true, message: '请输入用户名', trigger: 'blur' },\n    { min: 3, max: 20, message: '用户名长度在3到20个字符', trigger: 'blur' }\n  ],\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n  ],\n  displayName: [\n    { required: true, message: '请输入显示名称', trigger: 'blur' }\n  ],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    { min: 6, max: 20, message: '密码长度在6到20个字符', trigger: 'blur' }\n  ],\n  role: [\n    { required: true, message: '请选择角色', trigger: 'change' }\n  ]\n}\n\nconst userFormRef = ref()\nconst uploadRef = ref()\n\n// 加载用户列表\nconst loadUserList = async () => {\n  loading.value = true\n  try {\n    const params = {\n      page: currentPage.value,\n      size: pageSize.value,\n      keyword: searchKeyword.value\n    }\n    const response = await getUserList(params)\n    console.log('API Response:', response) // 调试日志\n    // 后端直接返回数组，所以需要处理数据格式\n    if (Array.isArray(response)) {\n      userList.value = response\n      total.value = response.length\n    } else if (response.data) {\n      userList.value = response.data\n      total.value = response.total || response.data.length\n    } else {\n      userList.value = []\n      total.value = 0\n    }\n  } catch (error) {\n    console.error('加载用户列表失败:', error)\n    ElMessage.error('加载用户列表失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 搜索用户\nconst handleSearch = async () => {\n  console.log('搜索用户:', searchKeyword.value) // 调试日志\n  currentPage.value = 1\n  await loadUserList()\n}\n\n// 添加用户\nconst handleAdd = () => {\n  dialogTitle.value = '添加用户'\n  Object.assign(userForm, {\n    id: null,\n    username: '',\n    email: '',\n    displayName: '',\n    password: '',\n    role: 'USER',\n    enabled: true\n  })\n  dialogVisible.value = true\n}\n\n// 编辑用户\nconst handleEdit = (row) => {\n  dialogTitle.value = '编辑用户'\n  Object.assign(userForm, row)\n  userForm.password = ''\n  dialogVisible.value = true\n}\n\n// 保存用户\nconst handleSave = async () => {\n  if (!userFormRef.value) return\n  \n  await userFormRef.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        if (userForm.id) {\n          await updateUser(userForm.id, userForm)\n          ElMessage.success('用户更新成功')\n        } else {\n          await createUser(userForm)\n          ElMessage.success('用户创建成功')\n        }\n        dialogVisible.value = false\n        await loadUserList()\n      } catch (error) {\n        ElMessage.error('操作失败：' + error.message)\n      }\n    }\n  })\n}\n\n// 删除用户\nconst handleDelete = async (row) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除用户 \"${row.username}\" 吗？`,\n      '确认删除',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n    \n    await deleteUser(row.id)\n    ElMessage.success('用户删除成功')\n    await loadUserList()\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('删除失败：' + error.message)\n    }\n  }\n}\n\n// 导入用户\nconst handleImport = () => {\n  importDialogVisible.value = true\n  uploadFile.value = null\n}\n\n// 文件变化\nconst handleFileChange = (file) => {\n  uploadFile.value = file.raw\n}\n\n// 提交导入\nconst handleImportSubmit = async () => {\n  if (!uploadFile.value) {\n    ElMessage.warning('请选择要导入的文件')\n    return\n  }\n  \n  try {\n    await importUsers(uploadFile.value)\n    ElMessage.success('用户导入成功')\n    importDialogVisible.value = false\n    await loadUserList()\n  } catch (error) {\n    ElMessage.error('导入失败：' + error.message)\n  }\n}\n\n// 导出用户\nconst handleExport = async () => {\n  try {\n    const response = await exportUsers()\n    const blob = new Blob([response], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = '用户列表.xlsx'\n    a.click()\n    window.URL.revokeObjectURL(url)\n    ElMessage.success('用户导出成功')\n  } catch (error) {\n    ElMessage.error('导出失败：' + error.message)\n  }\n}\n\n// 分页处理\nconst handleSizeChange = (val) => {\n  console.log('页面大小改变:', val) // 调试日志\n  pageSize.value = val\n  currentPage.value = 1\n  loadUserList()\n}\n\nconst handleCurrentChange = (val) => {\n  console.log('当前页改变:', val) // 调试日志\n  currentPage.value = val\n  loadUserList()\n}\n\n// 页面加载时初始化\nonMounted(() => {\n  console.log('Users.vue 组件挂载，开始加载用户列表') // 调试日志\n  loadUserList()\n})\n</script>\n\n<style scoped>\n.users-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.operation-bar {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.upload-demo {\n  text-align: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}