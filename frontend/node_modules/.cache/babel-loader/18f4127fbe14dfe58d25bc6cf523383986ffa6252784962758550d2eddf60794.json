{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withKeys as _withKeys, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"files-container\"\n};\nconst _hoisted_2 = {\n  class: \"toolbar\"\n};\nconst _hoisted_3 = {\n  class: \"toolbar-left\"\n};\nconst _hoisted_4 = {\n  class: \"toolbar-right\"\n};\nconst _hoisted_5 = {\n  class: \"file-list\"\n};\nconst _hoisted_6 = {\n  class: \"file-info\"\n};\nconst _hoisted_7 = {\n  class: \"file-name\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"upload-progress\"\n};\nconst _hoisted_9 = {\n  class: \"progress-info\"\n};\nconst _hoisted_10 = {\n  class: \"file-name\"\n};\nconst _hoisted_11 = {\n  class: \"progress-percent\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button_group = _resolveComponent(\"el-button-group\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_progress = _resolveComponent(\"el-progress\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 工具栏 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showUploadDialog = true)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Upload\"])]),\n      _: 1 /* STABLE */\n    }), _cache[5] || (_cache[5] = _createTextVNode(\" 上传文件 \", -1 /* CACHED */))]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    onClick: $setup.refreshFiles,\n    loading: $setup.loading\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Refresh\"])]),\n      _: 1 /* STABLE */\n    }), _cache[6] || (_cache[6] = _createTextVNode(\" 刷新 \", -1 /* CACHED */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"loading\"])]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_input, {\n    modelValue: $setup.searchKeyword,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.searchKeyword = $event),\n    placeholder: \"搜索文件...\",\n    style: {\n      \"width\": \"200px\"\n    },\n    clearable: \"\",\n    onKeyup: _withKeys($setup.searchFiles, [\"enter\"])\n  }, {\n    prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Search\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    onClick: $setup.searchFiles\n  }, {\n    default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createTextVNode(\"搜索\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])]), _createCommentVNode(\" 文件列表 \"), _createElementVNode(\"div\", _hoisted_5, [_withDirectives((_openBlock(), _createBlock(_component_el_table, {\n    data: $setup.files,\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      label: \"文件名\",\n      \"min-width\": \"300\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_icon, {\n        class: \"file-icon\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Document\"])]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"span\", _hoisted_7, _toDisplayString(row.originalFilename || row.name), 1 /* TEXT */)])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"size\",\n      label: \"大小\",\n      width: \"120\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createTextVNode(_toDisplayString($setup.formatFileSize(row.size)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"contentType\",\n      label: \"类型\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"createTime\",\n      label: \"创建时间\",\n      width: \"180\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createTextVNode(_toDisplayString($setup.formatDateTime(row.createTime)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"280\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_button_group, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $event => $setup.downloadFile(row)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode($setup[\"Download\"])]),\n            _: 1 /* STABLE */\n          }), _cache[8] || (_cache[8] = _createTextVNode(\" 下载 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $event => $setup.renameFile(row)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode($setup[\"Edit\"])]),\n            _: 1 /* STABLE */\n          }), _cache[9] || (_cache[9] = _createTextVNode(\" 重命名 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          size: \"small\",\n          type: \"danger\",\n          onClick: $event => $setup.deleteFile(row)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode($setup[\"Delete\"])]),\n            _: 1 /* STABLE */\n          }), _cache[10] || (_cache[10] = _createTextVNode(\" 删除 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $setup.loading]])]), _createCommentVNode(\" 上传对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showUploadDialog,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.showUploadDialog = $event),\n    title: \"上传文件\",\n    width: \"600px\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[3] || (_cache[3] = $event => $setup.showUploadDialog = false)\n    }, {\n      default: _withCtx(() => [...(_cache[12] || (_cache[12] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.uploadFilesFunc,\n      loading: $setup.uploading\n    }, {\n      default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\" 开始上传 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"loading\"])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $setup.uploadForm,\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"选择文件夹\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.uploadForm.folderId,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.uploadForm.folderId = $event),\n          placeholder: \"选择目标文件夹（可选）\",\n          clearable: \"\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"根目录\",\n            value: null\n          }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.availableFolders, folder => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: folder.id,\n              label: folder.name,\n              value: folder.id\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_el_upload, {\n      ref: \"uploadRef\",\n      class: \"upload-area\",\n      drag: \"\",\n      multiple: \"\",\n      \"auto-upload\": false,\n      \"on-change\": $setup.handleFileChange,\n      \"on-remove\": $setup.handleFileRemove,\n      limit: 10\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"el-icon--upload\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Upload\"])]),\n        _: 1 /* STABLE */\n      }), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n        class: \"el-upload__text\"\n      }, [_createTextVNode(\" 拖拽文件到此处或 \"), _createElementVNode(\"em\", null, \"点击上传\")], -1 /* CACHED */))]),\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */), $setup.uploadProgress.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.uploadProgress, (progress, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: \"progress-item\"\n      }, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, _toDisplayString(progress.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_11, _toDisplayString(progress.percent) + \"%\", 1 /* TEXT */)]), _createVNode(_component_el_progress, {\n        percentage: progress.percent,\n        status: progress.status\n      }, null, 8 /* PROPS */, [\"percentage\", \"status\"])]);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_button","type","onClick","_cache","$event","$setup","showUploadDialog","_component_el_icon","refreshFiles","loading","_hoisted_4","_component_el_input","searchKeyword","placeholder","style","clearable","onKeyup","_withKeys","searchFiles","prefix","_withCtx","_hoisted_5","_createBlock","_component_el_table","data","files","_component_el_table_column","label","default","row","_hoisted_6","_hoisted_7","_toDisplayString","originalFilename","name","prop","width","formatFileSize","size","formatDateTime","createTime","_component_el_button_group","downloadFile","renameFile","deleteFile","_component_el_dialog","title","footer","uploadFilesFunc","uploading","_component_el_form","model","uploadForm","_component_el_form_item","_component_el_select","folderId","_component_el_option","value","_Fragment","_renderList","availableFolders","folder","key","id","_component_el_upload","ref","drag","multiple","handleFileChange","handleFileRemove","limit","uploadProgress","length","_hoisted_8","progress","index","_hoisted_9","_hoisted_10","_hoisted_11","percent","_component_el_progress","percentage","status"],"sources":["/workspace/frontend/src/views/files/List.vue"],"sourcesContent":["<template>\n  <div class=\"files-container\">\n    <!-- 工具栏 -->\n    <div class=\"toolbar\">\n      <div class=\"toolbar-left\">\n        <el-button type=\"primary\" @click=\"showUploadDialog = true\">\n          <el-icon><Upload /></el-icon>\n          上传文件\n        </el-button>\n        <el-button @click=\"refreshFiles\" :loading=\"loading\">\n          <el-icon><Refresh /></el-icon>\n          刷新\n        </el-button>\n      </div>\n      \n      <div class=\"toolbar-right\">\n        <el-input\n          v-model=\"searchKeyword\"\n          placeholder=\"搜索文件...\"\n          style=\"width: 200px\"\n          clearable\n          @keyup.enter=\"searchFiles\"\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n        <el-button @click=\"searchFiles\">搜索</el-button>\n      </div>\n    </div>\n\n    <!-- 文件列表 -->\n    <div class=\"file-list\">\n      <el-table\n        :data=\"files\"\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n      >\n        <el-table-column label=\"文件名\" min-width=\"300\">\n          <template #default=\"{ row }\">\n            <div class=\"file-info\">\n              <el-icon class=\"file-icon\">\n                <Document />\n              </el-icon>\n              <span class=\"file-name\">{{ row.originalFilename || row.name }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"size\" label=\"大小\" width=\"120\">\n          <template #default=\"{ row }\">\n            {{ formatFileSize(row.size) }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"contentType\" label=\"类型\" width=\"150\" />\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\">\n          <template #default=\"{ row }\">\n            {{ formatDateTime(row.createTime) }}\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"280\">\n          <template #default=\"{ row }\">\n            <el-button-group>\n              <el-button size=\"small\" @click=\"downloadFile(row)\">\n                <el-icon><Download /></el-icon>\n                下载\n              </el-button>\n              <el-button size=\"small\" @click=\"renameFile(row)\">\n                <el-icon><Edit /></el-icon>\n                重命名\n              </el-button>\n              <el-button size=\"small\" type=\"danger\" @click=\"deleteFile(row)\">\n                <el-icon><Delete /></el-icon>\n                删除\n              </el-button>\n            </el-button-group>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!-- 上传对话框 -->\n    <el-dialog v-model=\"showUploadDialog\" title=\"上传文件\" width=\"600px\">\n      <el-form :model=\"uploadForm\" label-width=\"80px\">\n        <el-form-item label=\"选择文件夹\">\n          <el-select v-model=\"uploadForm.folderId\" placeholder=\"选择目标文件夹（可选）\" clearable>\n            <el-option label=\"根目录\" :value=\"null\" />\n            <el-option \n              v-for=\"folder in availableFolders\" \n              :key=\"folder.id\" \n              :label=\"folder.name\" \n              :value=\"folder.id\" \n            />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      \n      <el-upload\n        ref=\"uploadRef\"\n        class=\"upload-area\"\n        drag\n        multiple\n        :auto-upload=\"false\"\n        :on-change=\"handleFileChange\"\n        :on-remove=\"handleFileRemove\"\n        :limit=\"10\"\n      >\n        <el-icon class=\"el-icon--upload\"><Upload /></el-icon>\n        <div class=\"el-upload__text\">\n          拖拽文件到此处或 <em>点击上传</em>\n        </div>\n      </el-upload>\n      \n      <!-- 上传进度 -->\n      <div v-if=\"uploadProgress.length > 0\" class=\"upload-progress\">\n        <div v-for=\"(progress, index) in uploadProgress\" :key=\"index\" class=\"progress-item\">\n          <div class=\"progress-info\">\n            <span class=\"file-name\">{{ progress.name }}</span>\n            <span class=\"progress-percent\">{{ progress.percent }}%</span>\n          </div>\n          <el-progress :percentage=\"progress.percent\" :status=\"progress.status\" />\n        </div>\n      </div>\n      \n      <template #footer>\n        <el-button @click=\"showUploadDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"uploadFilesFunc\" :loading=\"uploading\">\n          开始上传\n        </el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Upload, Refresh, Search, Document, Download, Delete, Edit } from '@element-plus/icons-vue'\nimport { getFileList, uploadFile, downloadFile as downloadFileApi, deleteFile as deleteFileApi, searchFiles as searchFilesApi, renameFile as renameFileApi } from '@/api/file'\nimport { getFolderList } from '@/api/folder'\n\nconst loading = ref(false)\nconst uploading = ref(false)\nconst files = ref([])\nconst searchKeyword = ref('')\nconst showUploadDialog = ref(false)\nconst uploadFiles = ref([])\nconst availableFolders = ref([])\nconst uploadProgress = ref([])\n\nconst uploadForm = reactive({\n  folderId: null\n})\n\n// 格式化文件大小\nconst formatFileSize = (bytes) => {\n  if (!bytes) return '0 B'\n  const k = 1024\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// 格式化日期时间\nconst formatDateTime = (datetime) => {\n  if (!datetime) return ''\n  return new Date(datetime).toLocaleString()\n}\n\n// 加载文件夹列表\nconst loadFolders = async () => {\n  try {\n    const response = await getFolderList()\n    availableFolders.value = response || []\n  } catch (error) {\n    console.error('加载文件夹列表失败:', error)\n  }\n}\n\n// 加载文件列表\nconst loadFiles = async () => {\n  loading.value = true\n  try {\n    const response = await getFileList()\n    files.value = response || []\n  } catch (error) {\n    ElMessage.error('加载文件列表失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 刷新文件列表\nconst refreshFiles = () => {\n  loadFiles()\n}\n\n// 搜索文件\nconst searchFiles = async () => {\n  if (!searchKeyword.value.trim()) {\n    await loadFiles()\n    return\n  }\n  \n  loading.value = true\n  try {\n    const response = await searchFilesApi(searchKeyword.value)\n    files.value = response || []\n    ElMessage.success(`找到 ${files.value.length} 个文件`)\n  } catch (error) {\n    ElMessage.error('搜索失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 上传相关方法\nconst handleFileChange = (file) => {\n  uploadFiles.value.push(file)\n}\n\nconst handleFileRemove = (file) => {\n  const index = uploadFiles.value.findIndex(f => f.uid === file.uid)\n  if (index > -1) {\n    uploadFiles.value.splice(index, 1)\n  }\n}\n\nconst uploadFilesFunc = async () => {\n  if (uploadFiles.value.length === 0) {\n    ElMessage.warning('请选择要上传的文件')\n    return\n  }\n\n  uploading.value = true\n  uploadProgress.value = uploadFiles.value.map(file => ({\n    name: file.name,\n    percent: 0,\n    status: ''\n  }))\n\n  try {\n    for (let i = 0; i < uploadFiles.value.length; i++) {\n      const file = uploadFiles.value[i]\n      const formData = new FormData()\n      formData.append('file', file.raw)\n      \n      if (uploadForm.folderId) {\n        formData.append('folderId', uploadForm.folderId)\n      }\n\n      uploadProgress.value[i].status = 'uploading'\n      \n      await uploadFile(formData, (progressEvent) => {\n        const percent = Math.round((progressEvent.loaded * 100) / progressEvent.total)\n        uploadProgress.value[i].percent = percent\n      })\n      \n      uploadProgress.value[i].status = 'success'\n      uploadProgress.value[i].percent = 100\n    }\n    \n    ElMessage.success('文件上传成功')\n    showUploadDialog.value = false\n    uploadFiles.value = []\n    uploadProgress.value = []\n    uploadForm.folderId = null\n    await loadFiles()\n  } catch (error) {\n    ElMessage.error('文件上传失败')\n    uploadProgress.value.forEach(progress => {\n      if (progress.status !== 'success') {\n        progress.status = 'exception'\n      }\n    })\n  } finally {\n    uploading.value = false\n  }\n}\n\n// 下载文件\nconst downloadFile = async (file) => {\n  try {\n    const response = await downloadFileApi(file.id)\n    const blob = new Blob([response.data])\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = file.originalFilename || file.name\n    document.body.appendChild(a)\n    a.click()\n    window.URL.revokeObjectURL(url)\n    document.body.removeChild(a)\n  } catch (error) {\n    ElMessage.error('文件下载失败')\n  }\n}\n\n// 重命名文件\nconst renameFile = async (file) => {\n  try {\n    const { value } = await ElMessageBox.prompt(\n      `请输入文件的新名称`,\n      '重命名文件',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputValue: file.originalFilename || file.name,\n        inputPattern: /.+/,\n        inputErrorMessage: '文件名不能为空'\n      }\n    )\n    \n    await renameFileApi(file.id, value)\n    ElMessage.success('文件重命名成功')\n    await loadFiles()\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('文件重命名失败')\n    }\n  }\n}\n\n// 删除文件\nconst deleteFile = async (file) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除文件 \"${file.originalFilename || file.name}\" 吗？`,\n      '删除确认',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n    \n    await deleteFileApi(file.id)\n    ElMessage.success('文件删除成功')\n    await loadFiles()\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('文件删除失败')\n    }\n  }\n}\n\nonMounted(() => {\n  loadFiles()\n  loadFolders()\n})\n</script>\n\n<style scoped>\n.files-container {\n  padding: 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.toolbar-left {\n  display: flex;\n  gap: 10px;\n}\n\n.toolbar-right {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n\n.breadcrumb {\n  margin-bottom: 20px;\n  padding: 10px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.file-list {\n  flex: 1;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  overflow: hidden;\n}\n\n.file-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.file-icon {\n  font-size: 18px;\n  color: #409EFF;\n}\n\n.file-name {\n  font-weight: 500;\n}\n\n.upload-area {\n  border: 2px dashed #d9d9d9;\n  border-radius: 6px;\n  padding: 20px;\n  text-align: center;\n  cursor: pointer;\n  transition: border-color 0.3s;\n}\n\n.upload-area:hover {\n  border-color: #409EFF;\n}\n\n.upload-area .el-icon--upload {\n  font-size: 48px;\n  color: #409EFF;\n  margin-bottom: 16px;\n}\n\n.el-upload__text {\n  color: #666;\n  font-size: 14px;\n}\n\n.el-upload__text em {\n  color: #409EFF;\n  font-style: normal;\n}\n\n:deep(.el-table) {\n  height: 100%;\n}\n\n:deep(.el-table__body-wrapper) {\n  overflow-y: auto;\n}\n\n.upload-progress {\n  margin-top: 20px;\n}\n\n.progress-item {\n  margin-bottom: 15px;\n}\n\n.progress-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 5px;\n}\n\n.progress-item .file-name {\n  font-size: 14px;\n  color: #333;\n  font-weight: 500;\n}\n\n.progress-item .progress-percent {\n  font-size: 12px;\n  color: #666;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}