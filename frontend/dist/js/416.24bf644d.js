"use strict";(self["webpackChunkenterprise_file_manager_frontend"]=self["webpackChunkenterprise_file_manager_frontend"]||[]).push([[416],{1416:function(e,a,l){l.r(a),l.d(a,{default:function(){return N}});var t=l(6768),n=l(4232),s=l(144),u=l(5130),i=l(1387),r=l(7756),d=l(2933),o=l(1219),c=l(7477);const b={class:"app-container"},k={class:"logo"},m={class:"main-container"},g={class:"navbar"},f={class:"navbar-left"},p={class:"navbar-right"},F={class:"storage-info"},_={class:"storage-text"},v={class:"user-avatar"},I={class:"username"},h={class:"main-content"},M="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNFOEU4RkYiLz4KPGNpcmNsZSBjeD0iMjAiIGN5PSIxNSIgcj0iNiIgZmlsbD0iIzQ1NEE1NSIvPgo8cGF0aCBkPSJNMjAgMjNDMTUuNTg3MiAyMyAxMiAyNi41ODcyIDEyIDMxQzEyIDM1LjQxMjggMTUuNTg3MiAzOSAyMCAzOUMyNC40MTI4IDM5IDI4IDM1LjQxMjggMjggMzFDMjggMjYuNTg3MiAyNC40MTI4IDIzIDIwIDIzWiIgZmlsbD0iIzQ1NEE1NSIvPgo8L3N2Zz4K";var w={__name:"index",setup(e){const a=(0,i.lq)(),l=(0,i.rd)(),w=(0,r.n)(),y=(0,s.KR)(!1),L=(0,t.EW)(()=>a.path),N=(0,t.EW)(()=>{const e=a.matched.filter(e=>e.meta&&e.meta.title);return e.map(e=>({path:e.path,title:e.meta.title}))}),x=(0,t.EW)(()=>{const e=w.user?.quotaUsed||0,a=w.user?.quotaLimit||0;return a>0?Math.round(e/a*100):0}),D=(0,t.EW)(()=>{const e=x.value;return e<60?"#67c23a":e<80?"#e6a23c":"#f56c6c"}),R=()=>{y.value=!y.value},A=e=>{l.push(e)},W=async e=>{switch(e){case"profile":l.push("/profile");break;case"help":l.push("/help");break;case"admin":l.push("/admin/users");break;case"logout":await d.s.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await S();break}},S=async()=>{try{if(w.logout(),localStorage.removeItem("enterprise_file_manager_token"),localStorage.removeItem("enterprise_file_manager_user"),localStorage.removeItem("enterprise_file_manager_roles"),sessionStorage.clear(),"caches"in window)try{const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}catch(e){console.warn("清除浏览器缓存失败:",e)}l.push("/login"),o.nk.success("已安全退出登录"),setTimeout(()=>{window.location.reload()},500)}catch(e){console.error("退出登录失败:",e),o.nk.error("退出登录失败，请重试")}},j=e=>{if(!e)return"0 B";const a=1024,l=["B","KB","MB","GB","TB"],t=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,t)).toFixed(2))+" "+l[t]};return(0,t.wB)(()=>a.path,()=>{}),(e,a)=>{const l=(0,t.g2)("el-icon"),i=(0,t.g2)("el-menu-item"),r=(0,t.g2)("el-sub-menu"),d=(0,t.g2)("el-menu"),o=(0,t.g2)("el-button"),S=(0,t.g2)("el-breadcrumb-item"),C=(0,t.g2)("el-breadcrumb"),B=(0,t.g2)("el-progress"),E=(0,t.g2)("el-avatar"),z=(0,t.g2)("el-dropdown-item"),Z=(0,t.g2)("el-dropdown-menu"),G=(0,t.g2)("el-dropdown"),T=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",{class:(0,n.C4)(["sidebar",{collapsed:y.value}])},[(0,t.Lk)("div",k,[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Files))]),_:1}),(0,t.bo)((0,t.Lk)("span",null,"文件管理系统",512),[[u.aG,!y.value]])]),(0,t.bF)(d,{"default-active":L.value,collapse:y.value,"unique-opened":!0,class:"sidebar-menu",onSelect:A},{default:(0,t.k6)(()=>[(0,t.bF)(i,{index:"/dashboard"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.DataLine))]),_:1}),a[0]||(a[0]=(0,t.Lk)("span",null,"仪表盘",-1))]),_:1}),(0,t.bF)(i,{index:"/files"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Files))]),_:1}),a[1]||(a[1]=(0,t.Lk)("span",null,"文件管理",-1))]),_:1}),(0,t.bF)(i,{index:"/folders"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Folder))]),_:1}),a[2]||(a[2]=(0,t.Lk)("span",null,"文件夹管理",-1))]),_:1}),(0,t.bF)(i,{index:"/share"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Share))]),_:1}),a[3]||(a[3]=(0,t.Lk)("span",null,"我的分享",-1))]),_:1}),(0,t.bF)(i,{index:"/recycle"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Delete))]),_:1}),a[4]||(a[4]=(0,t.Lk)("span",null,"回收站",-1))]),_:1}),(0,s.R1)(w).isAdmin?((0,t.uX)(),(0,t.Wv)(r,{key:0,index:"/admin"},{title:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Setting))]),_:1}),a[5]||(a[5]=(0,t.Lk)("span",null,"系统管理",-1))]),default:(0,t.k6)(()=>[(0,t.bF)(i,{index:"/admin/users"},{default:(0,t.k6)(()=>[...a[6]||(a[6]=[(0,t.eW)("用户管理",-1)])]),_:1}),(0,t.bF)(i,{index:"/admin/files"},{default:(0,t.k6)(()=>[...a[7]||(a[7]=[(0,t.eW)("文件管理",-1)])]),_:1}),(0,t.bF)(i,{index:"/admin/logs"},{default:(0,t.k6)(()=>[...a[8]||(a[8]=[(0,t.eW)("日志管理",-1)])]),_:1}),(0,t.bF)(i,{index:"/admin/system"},{default:(0,t.k6)(()=>[...a[9]||(a[9]=[(0,t.eW)("系统设置",-1)])]),_:1})]),_:1})):(0,t.Q3)("",!0)]),_:1},8,["default-active","collapse"])],2),(0,t.Lk)("div",m,[(0,t.Lk)("div",g,[(0,t.Lk)("div",f,[(0,t.bF)(o,{type:"text",onClick:R,class:"toggle-btn"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[y.value?((0,t.uX)(),(0,t.Wv)((0,s.R1)(c.Expand),{key:1})):((0,t.uX)(),(0,t.Wv)((0,s.R1)(c.Fold),{key:0}))]),_:1})]),_:1}),(0,t.bF)(C,{separator:"/"},{default:(0,t.k6)(()=>[(0,t.bF)(S,{to:{path:"/"}},{default:(0,t.k6)(()=>[...a[10]||(a[10]=[(0,t.eW)("首页",-1)])]),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(N.value,e=>((0,t.uX)(),(0,t.Wv)(S,{key:e.path},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.title),1)]),_:2},1024))),128))]),_:1})]),(0,t.Lk)("div",p,[(0,t.Lk)("div",F,[(0,t.bF)(B,{percentage:x.value,color:D.value,"show-text":!1,"stroke-width":4,style:{width:"100px"}},null,8,["percentage","color"]),(0,t.Lk)("span",_,(0,n.v_)(j((0,s.R1)(w).user?.quotaUsed||0))+" / "+(0,n.v_)(j((0,s.R1)(w).user?.quotaLimit||0)),1)]),(0,t.bF)(G,{onCommand:W},{dropdown:(0,t.k6)(()=>[(0,t.bF)(Z,null,{default:(0,t.k6)(()=>[(0,t.bF)(z,{command:"profile"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.User))]),_:1}),a[11]||(a[11]=(0,t.eW)(" 个人设置 ",-1))]),_:1}),(0,t.bF)(z,{command:"help"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.QuestionFilled))]),_:1}),a[12]||(a[12]=(0,t.eW)(" 帮助中心 ",-1))]),_:1}),(0,s.R1)(w).isAdmin?((0,t.uX)(),(0,t.Wv)(z,{key:0,command:"admin"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.Setting))]),_:1}),a[13]||(a[13]=(0,t.eW)(" 管理后台 ",-1))]),_:1})):(0,t.Q3)("",!0),(0,t.bF)(z,{divided:"",command:"logout"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.SwitchButton))]),_:1}),a[14]||(a[14]=(0,t.eW)(" 退出登录 ",-1))]),_:1})]),_:1})]),default:(0,t.k6)(()=>[(0,t.Lk)("div",v,[(0,t.bF)(E,{size:40,src:(0,s.R1)(w).user?.avatarUrl||M},null,8,["src"]),(0,t.Lk)("span",I,(0,n.v_)((0,s.R1)(w).user?.displayName||(0,s.R1)(w).user?.username),1),(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,s.R1)(c.ArrowDown))]),_:1})])]),_:1})])]),(0,t.Lk)("div",h,[(0,t.bF)(T)])])])}}},y=l(1241);const L=(0,y.A)(w,[["__scopeId","data-v-08c80f9d"]]);var N=L}}]);
//# sourceMappingURL=416.24bf644d.js.map