"use strict";(self["webpackChunkenterprise_file_manager_frontend"]=self["webpackChunkenterprise_file_manager_frontend"]||[]).push([[462],{646:function(e,l,a){a.d(l,{f6:function(){return n},iE:function(){return d},sE:function(){return r},vV:function(){return u},xv:function(){return o}});var t=a(5720);function n(e){return(0,t.A)({url:"/folders/list",method:"get",params:e})}function u(e){return(0,t.A)({url:"/folders/create",method:"post",data:e})}function r(e){return(0,t.A)({url:`/folders/${e}`,method:"delete"})}function o(e,l){return(0,t.A)({url:`/folders/${e}/rename`,method:"put",data:{name:l}})}function d(e){return(0,t.A)({url:`/folders/${e}/path`,method:"get"})}},2462:function(e,l,a){a.r(l),a.d(l,{default:function(){return C}});var t=a(6768),n=a(144),u=a(5130),r=a(4232),o=a(1387),d=a(1219),i=a(2933),c=a(7477),s=a(646);const f={class:"folders-container"},k={class:"toolbar"},b={class:"toolbar-left"},m={class:"toolbar-right"},v={key:0,class:"breadcrumb"},p=["onClick"],_={class:"folder-list"},F={class:"folder-info"},g={class:"folder-name"};var h={__name:"List",setup(e){(0,o.rd)();const l=(0,n.KR)(!1),a=(0,n.KR)(!1),h=(0,n.KR)([]),w=(0,n.KR)(""),y=(0,n.KR)(!1),C=(0,n.KR)(null),R=(0,n.KR)([]),V=(0,n.Kh)({name:""}),x=e=>e?new Date(e).toLocaleString():"",W=async()=>{l.value=!0;try{const e=await(0,s.f6)({parentId:C.value});if(h.value=e||[],C.value){const e=await(0,s.iE)(C.value);R.value=e||[]}else R.value=[]}catch(e){d.nk.error("加载文件夹列表失败")}finally{l.value=!1}},K=()=>{W()},L=()=>{d.nk.info("文件夹搜索功能开发中...")},E=async()=>{if(V.name.trim()){a.value=!0;try{await(0,s.vV)({name:V.name,parentId:C.value}),d.nk.success("文件夹创建成功"),y.value=!1,V.name="",await W()}catch(e){d.nk.error("文件夹创建失败")}finally{a.value=!1}}else d.nk.warning("请输入文件夹名称")},A=e=>{C.value=e.id,W()},T=e=>{C.value=e,W()},X=async e=>{try{const{value:l}=await i.s.prompt("请输入文件夹的新名称","重命名文件夹",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.name,inputPattern:/.+/,inputErrorMessage:"文件夹名称不能为空"});await(0,s.xv)(e.id,l),d.nk.success("文件夹重命名成功"),await W()}catch(l){"cancel"!==l&&d.nk.error("文件夹重命名失败")}},B=async e=>{try{await i.s.confirm(`确定要删除文件夹 "${e.name}" 吗？删除后无法恢复！`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await(0,s.sE)(e.id),d.nk.success("文件夹删除成功"),await W()}catch(l){"cancel"!==l&&d.nk.error("文件夹删除失败")}};return(0,t.sV)(()=>{W()}),(e,o)=>{const d=(0,t.g2)("el-icon"),i=(0,t.g2)("el-button"),s=(0,t.g2)("el-input"),C=(0,t.g2)("el-breadcrumb-item"),W=(0,t.g2)("el-breadcrumb"),I=(0,t.g2)("el-table-column"),$=(0,t.g2)("el-button-group"),z=(0,t.g2)("el-table"),U=(0,t.g2)("el-form-item"),D=(0,t.g2)("el-form"),O=(0,t.g2)("el-dialog"),S=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("div",k,[(0,t.Lk)("div",b,[(0,t.bF)(i,{type:"primary",onClick:o[0]||(o[0]=e=>y.value=!0)},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.FolderOpened))]),_:1}),o[6]||(o[6]=(0,t.eW)(" 新建文件夹 ",-1))]),_:1}),(0,t.bF)(i,{onClick:K,loading:l.value},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.Refresh))]),_:1}),o[7]||(o[7]=(0,t.eW)(" 刷新 ",-1))]),_:1},8,["loading"])]),(0,t.Lk)("div",m,[(0,t.bF)(s,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=e=>w.value=e),placeholder:"搜索文件夹...",style:{width:"200px"},clearable:"",onKeyup:(0,u.jR)(L,["enter"])},{prefix:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.Search))]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(i,{onClick:L},{default:(0,t.k6)(()=>[...o[8]||(o[8]=[(0,t.eW)("搜索",-1)])]),_:1})])]),R.value.length>0?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(W,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,null,{default:(0,t.k6)(()=>[(0,t.Lk)("a",{onClick:o[2]||(o[2]=e=>T(null))},"根目录")]),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(R.value,e=>((0,t.uX)(),(0,t.Wv)(C,{key:e.id},{default:(0,t.k6)(()=>[(0,t.Lk)("a",{onClick:l=>T(e.id)},(0,r.v_)(e.name),9,p)]),_:2},1024))),128))]),_:1})])):(0,t.Q3)("",!0),(0,t.Lk)("div",_,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(z,{data:h.value,style:{width:"100%"}},{default:(0,t.k6)(()=>[(0,t.bF)(I,{label:"文件夹名称","min-width":"300"},{default:(0,t.k6)(({row:e})=>[(0,t.Lk)("div",F,[(0,t.bF)(d,{class:"folder-icon"},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.Folder))]),_:1}),(0,t.Lk)("span",g,(0,r.v_)(e.name),1)])]),_:1}),(0,t.bF)(I,{prop:"createTime",label:"创建时间",width:"180"},{default:(0,t.k6)(({row:e})=>[(0,t.eW)((0,r.v_)(x(e.createTime)),1)]),_:1}),(0,t.bF)(I,{label:"操作",width:"240"},{default:(0,t.k6)(({row:e})=>[(0,t.bF)($,null,{default:(0,t.k6)(()=>[(0,t.bF)(i,{size:"small",onClick:l=>A(e)},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.FolderOpened))]),_:1}),o[9]||(o[9]=(0,t.eW)(" 打开 ",-1))]),_:1},8,["onClick"]),(0,t.bF)(i,{size:"small",onClick:l=>X(e)},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.Edit))]),_:1}),o[10]||(o[10]=(0,t.eW)(" 重命名 ",-1))]),_:1},8,["onClick"]),(0,t.bF)(i,{size:"small",type:"danger",onClick:l=>B(e)},{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(c.Delete))]),_:1}),o[11]||(o[11]=(0,t.eW)(" 删除 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[S,l.value]])]),(0,t.bF)(O,{modelValue:y.value,"onUpdate:modelValue":o[5]||(o[5]=e=>y.value=e),title:"新建文件夹",width:"400px"},{footer:(0,t.k6)(()=>[(0,t.bF)(i,{onClick:o[4]||(o[4]=e=>y.value=!1)},{default:(0,t.k6)(()=>[...o[12]||(o[12]=[(0,t.eW)("取消",-1)])]),_:1}),(0,t.bF)(i,{type:"primary",onClick:E,loading:a.value},{default:(0,t.k6)(()=>[...o[13]||(o[13]=[(0,t.eW)(" 创建 ",-1)])]),_:1},8,["loading"])]),default:(0,t.k6)(()=>[(0,t.bF)(D,{model:V,"label-width":"80px"},{default:(0,t.k6)(()=>[(0,t.bF)(U,{label:"文件夹名称"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{modelValue:V.name,"onUpdate:modelValue":o[3]||(o[3]=e=>V.name=e),placeholder:"请输入文件夹名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},w=a(1241);const y=(0,w.A)(h,[["__scopeId","data-v-4a4bb786"]]);var C=y}}]);
//# sourceMappingURL=462.51c5842e.js.map