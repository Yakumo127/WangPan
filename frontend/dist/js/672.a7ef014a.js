"use strict";(self["webpackChunkenterprise_file_manager_frontend"]=self["webpackChunkenterprise_file_manager_frontend"]||[]).push([[672],{5672:function(e,a,r){r.r(a),r.d(a,{default:function(){return w}});var l=r(6768),s=r(5130),o=r(144),u=r(1387),i=r(1219),n=r(7756);const d={class:"login-container"},t={class:"login-box"},m={class:"login-header"},p={class:"mode-switch"};var c={__name:"Login",setup(e){const a=(0,u.rd)(),r=(0,u.lq)(),c=(0,n.n)(),g=(0,o.KR)(),f=(0,o.KR)(),w=(0,o.KR)(!1),k=(0,o.KR)(!0),v=(0,o.Kh)({username:"",password:""}),b=(0,o.Kh)({username:"",email:"",password:"",confirmPassword:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3-20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20个字符",trigger:"blur"}]},_=(e,a,r)=>{""===a?r(new Error("请输入密码")):a.length<6?r(new Error("密码长度不能小于6位")):(""!==b.confirmPassword&&f.value?.validateField("confirmPassword"),r())},h=(e,a,r)=>{""===a?r(new Error("请再次输入密码")):a!==b.password?r(new Error("两次输入密码不一致")):r()},F={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3-20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{validator:_,trigger:"blur"}],confirmPassword:[{validator:h,trigger:"blur"}]},V=e=>{k.value=e,g.value&&g.value.clearValidate(),f.value&&f.value.clearValidate()},x=async()=>{g.value&&await g.value.validate(async e=>{if(e){w.value=!0;try{await c.handleLogin(v),i.nk.success("登录成功"),a.push("/")}catch(r){i.nk.error(r.message||"登录失败")}finally{w.value=!1}}})},z=async()=>{f.value&&await f.value.validate(async e=>{if(e){w.value=!0;try{await c.handleRegister({username:b.username,email:b.email,password:b.password,confirmPassword:b.confirmPassword}),i.nk.success("注册成功"),k.value=!0,b.username="",b.email="",b.password="",b.confirmPassword=""}catch(a){i.nk.error(a.message||"注册失败")}finally{w.value=!1}}})};return(0,l.sV)(()=>{"register"===r.query.mode&&(k.value=!1)}),(e,a)=>{const r=(0,l.g2)("el-button"),o=(0,l.g2)("el-input"),u=(0,l.g2)("el-form-item"),i=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",t,[(0,l.Lk)("div",m,[a[10]||(a[10]=(0,l.Lk)("h1",null,"企业文件管理系统",-1)),a[11]||(a[11]=(0,l.Lk)("p",null,"安全、高效的企业级文件管理平台",-1)),(0,l.Lk)("div",p,[(0,l.bF)(r,{type:k.value?"primary":"default",size:"large",onClick:a[0]||(a[0]=e=>V(!0))},{default:(0,l.k6)(()=>[...a[8]||(a[8]=[(0,l.eW)(" 登录 ",-1)])]),_:1},8,["type"]),(0,l.bF)(r,{type:k.value?"default":"primary",size:"large",onClick:a[1]||(a[1]=e=>V(!1))},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)(" 注册 ",-1)])]),_:1},8,["type"])])]),k.value?((0,l.uX)(),(0,l.Wv)(i,{key:0,ref_key:"loginFormRef",ref:g,model:v,rules:y,class:"login-form",onSubmit:(0,s.D$)(x,["prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(u,{prop:"username"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:v.username,"onUpdate:modelValue":a[2]||(a[2]=e=>v.username=e),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{prop:"password"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:v.password,"onUpdate:modelValue":a[3]||(a[3]=e=>v.password=e),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:(0,s.jR)(x,["enter"])},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"primary",size:"large",style:{width:"100%"},loading:w.value,onClick:x},{default:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.eW)(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])):((0,l.uX)(),(0,l.Wv)(i,{key:1,ref_key:"registerFormRef",ref:f,model:b,rules:F,class:"login-form",onSubmit:(0,s.D$)(z,["prevent"])},{default:(0,l.k6)(()=>[(0,l.bF)(u,{prop:"username"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:b.username,"onUpdate:modelValue":a[4]||(a[4]=e=>b.username=e),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{prop:"email"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:b.email,"onUpdate:modelValue":a[5]||(a[5]=e=>b.email=e),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message",clearable:""},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{prop:"password"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:b.password,"onUpdate:modelValue":a[6]||(a[6]=e=>b.password=e),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{prop:"confirmPassword"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:b.confirmPassword,"onUpdate:modelValue":a[7]||(a[7]=e=>b.confirmPassword=e),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:(0,s.jR)(z,["enter"])},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"primary",size:"large",style:{width:"100%"},loading:w.value,onClick:z},{default:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.eW)(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]))])])}}},g=r(1241);const f=(0,g.A)(c,[["__scopeId","data-v-e917c8e0"]]);var w=f}}]);
//# sourceMappingURL=672.a7ef014a.js.map