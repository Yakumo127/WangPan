{"version":3,"file":"js/693.75b6cd41.js","mappings":"2oBAmHA,MAAMA,GAAYC,EAAAA,EAAAA,KAEZC,GAASC,EAAAA,EAAAA,KAAI,GAEbC,IADUD,EAAAA,EAAAA,KAAI,IACFA,EAAAA,EAAAA,IAAI,CACpBE,YAAa,KAGTC,GAAiBH,EAAAA,EAAAA,MACjBI,GAAcC,EAAAA,EAAAA,IAAS,CAC3BC,SAAU,GACVC,MAAO,GACPC,YAAa,GACbC,UAAW,GACXC,gBAAiB,GACjBC,YAAa,GACbC,gBAAiB,KAGbC,GAAOC,EAAAA,EAAAA,IAAS,IAAMjB,EAAUgB,MAEhCE,EAAe,CACnBR,MAAO,CACL,CAAES,UAAU,EAAMC,QAAS,QAASC,QAAS,QAC7C,CAAEC,KAAM,QAASF,QAAS,aAAcC,QAAS,SAEnDV,YAAa,CACX,CAAEQ,UAAU,EAAMC,QAAS,UAAWC,QAAS,QAC/C,CAAEE,IAAK,EAAGC,IAAK,GAAIJ,QAAS,iBAAkBC,QAAS,SAEzDR,gBAAiB,CACf,CAAEM,UAAU,EAAMC,QAAS,UAAWC,QAAS,SAEjDP,YAAa,CACX,CAAES,IAAK,EAAGC,IAAK,GAAIJ,QAAS,eAAgBC,QAAS,SAEvDN,gBAAiB,CACf,CACEU,UAAWA,CAACC,EAAMC,EAAOC,KACnBD,GAASA,IAAUpB,EAAYO,YACjCc,EAAS,IAAIC,MAAM,cAEnBD,KAGJP,QAAS,UAMTS,EAAiBC,IACrB,IAAKA,EAAO,MAAO,MACnB,MAAMC,EAAI,KACJC,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,MAChCC,EAAIC,KAAKC,MAAMD,KAAKE,IAAIN,GAASI,KAAKE,IAAIL,IAChD,OAAOM,YAAYP,EAAQI,KAAKI,IAAIP,EAAGE,IAAIM,QAAQ,IAAM,IAAMP,EAAMC,IAIjEO,EAAkBC,GACjBA,EACE,IAAIC,KAAKD,GAAUE,iBADJ,MAKlBC,EAAgBC,UACpB,IACE,MAAMC,QAAiBC,EAAAA,EAAAA,MACjBC,EAAQF,GAAY,GAC1B3C,EAAUuB,MAAQ,CAChBtB,YAAa4C,EAAMC,OAAO,CAACC,EAAKC,IAASD,GAAOC,EAAKC,MAAQ,GAAI,GAErE,CAAE,MAAOC,GACPC,QAAQD,MAAM,cAAeA,EAC/B,GAIIE,EAAkBA,KAClBxC,EAAKW,QACPpB,EAAYE,SAAWO,EAAKW,MAAMlB,SAClCF,EAAYG,MAAQM,EAAKW,MAAMjB,MAC/BH,EAAYI,YAAcK,EAAKW,MAAMhB,YACrCJ,EAAYK,UAAYI,EAAKW,MAAMf,YAKjC6C,EAAcX,UACbxC,EAAeqB,aAEdrB,EAAeqB,MAAM+B,SAASZ,UAClC,GAAIa,EAAO,CACTzD,EAAOyB,OAAQ,EACf,IAEE,IAAK3B,EAAU4D,gBACb,MAAM,IAAI/B,MAAM,QAIlB,MAAMgC,EAAc,CAClBlD,YAAaJ,EAAYI,YACzBD,MAAOH,EAAYG,MACnBE,UAAWL,EAAYK,iBAIFkD,EAAAA,EAAQC,IAAI,gBAAiBF,GAGhDtD,EAAYO,mBACRgD,EAAAA,EAAQE,KAAK,wBAAyB,CAC1CC,YAAa1D,EAAYM,gBACzBC,YAAaP,EAAYO,cAG3BoD,EAAAA,GAAUC,QAAQ,qBAClBnE,EAAUoE,SACVC,OAAOC,SAASC,KAAO,WAEvBL,EAAAA,GAAUC,QAAQ,kBAEZnE,EAAUwE,iBAIlBjE,EAAYM,gBAAkB,GAC9BN,EAAYO,YAAc,GAC1BP,EAAYQ,gBAAkB,EAEhC,CAAE,MAAOuC,GACPC,QAAQD,MAAM,QAASA,GACvBY,EAAAA,GAAUZ,MAAMA,EAAMP,UAAU0B,MAAMrD,SAAWkC,EAAMlC,SAAW,OACpE,CAAE,QACAlB,EAAOyB,OAAQ,CACjB,CACF,K,OAIJ+C,EAAAA,EAAAA,IAAU5B,UAER,IAAK9C,EAAUgB,MAAQhB,EAAU4D,gBAC/B,UACQ5D,EAAUwE,eAClB,CAAE,MAAOlB,GAGP,OAFAC,QAAQD,MAAM,YAAaA,QAC3BY,EAAAA,GAAUZ,MAAM,iBAElB,CAGFE,IACAX,M,uQA7QA8B,EAAAA,EAAAA,IAuGM,MAvGNC,EAuGM,EAtGJC,EAAAA,EAAAA,IAqGSC,EAAA,CArGAC,OAAQ,IAAE,C,iBAEjB,IA+BS,EA/BTF,EAAAA,EAAAA,IA+BSG,EAAA,CA/BAC,KAAM,GAAC,C,iBACd,IA6BU,EA7BVJ,EAAAA,EAAAA,IA6BUK,EAAA,CA7BDC,MAAM,kBAAgB,C,iBAC7B,IAMM,EANNC,EAAAA,EAAAA,IAMM,MANNC,EAMM,EALJR,EAAAA,EAAAA,IAEYS,EAAA,CAFAjC,KAAM,IAAMkC,IAAKvE,EAAAW,OAAMf,W,kBACjC,IAA2B,EAA3BiE,EAAAA,EAAAA,IAA2BW,EAAA,M,iBAAlB,IAAQ,EAARX,EAAAA,EAAAA,KAAQY,EAAAA,EAAAA,IAAAC,EAAAA,S,yBAEnBN,EAAAA,EAAAA,IAAsE,MAAtEO,GAAsEC,EAAAA,EAAAA,IAA5C5E,EAAAW,OAAMhB,aAAeK,EAAAW,OAAMlB,UAAQ,IAC7D2E,EAAAA,EAAAA,IAAuD,MAAvDS,GAAuDD,EAAAA,EAAAA,IAA7B5E,EAAAW,OAAMmE,MAAQ,QAAJ,MAGtCjB,EAAAA,EAAAA,IAAckB,IAEdX,EAAAA,EAAAA,IAiBM,MAjBNY,EAiBM,EAhBJZ,EAAAA,EAAAA,IAGM,MAHNa,EAGM,C,aAFJb,EAAAA,EAAAA,IAAkC,OAA7BD,MAAM,cAAa,QAAI,KAC5BC,EAAAA,EAAAA,IAAoE,MAApEc,GAAoEN,EAAAA,EAAAA,IAAzCnD,EAAezB,EAAAW,OAAMwE,aAAU,MAE5Df,EAAAA,EAAAA,IAGM,MAHNgB,EAGM,C,aAFJhB,EAAAA,EAAAA,IAAkC,OAA7BD,MAAM,cAAa,QAAI,KAC5BC,EAAAA,EAAAA,IAAuE,MAAvEiB,GAAuET,EAAAA,EAAAA,IAA5CnD,EAAezB,EAAAW,OAAM2E,gBAAa,MAE/DlB,EAAAA,EAAAA,IAGM,MAHNmB,EAGM,C,aAFJnB,EAAAA,EAAAA,IAAkC,OAA7BD,MAAM,cAAa,QAAI,KAC5BC,EAAAA,EAAAA,IAAyF,MAAzFoB,GAAyFZ,EAAAA,EAAAA,IAA9D9D,EAAcd,EAAAW,OAAM8E,YAAc,aAAJ,MAE3DrB,EAAAA,EAAAA,IAGM,MAHNsB,EAGM,C,eAFJtB,EAAAA,EAAAA,IAAkC,OAA7BD,MAAM,cAAa,QAAI,KAC5BC,EAAAA,EAAAA,IAA6E,MAA7EuB,GAA6Ef,EAAAA,EAAAA,IAAlD9D,EAAc1B,EAAAuB,MAAUtB,aAAe,IAAJ,S,eAOtEwE,EAAAA,EAAAA,IAgESG,EAAA,CAhEAC,KAAM,IAAE,C,iBACf,IA8DU,EA9DVJ,EAAAA,EAAAA,IA8DUK,EAAA,CA9DDC,MAAM,qBAAmB,CACrByB,QAAMC,EAAAA,EAAAA,IACf,IAKM,EALNzB,EAAAA,EAAAA,IAKM,MALN0B,EAKM,C,eAJJ1B,EAAAA,EAAAA,IAAiB,YAAX,QAAI,KACVP,EAAAA,EAAAA,IAEYkC,EAAA,CAFDzF,KAAK,UAAW0F,QAAOvD,EAAcwD,QAAS/G,EAAAyB,O,kBAAQ,IAEjE,IAAAuF,EAAA,MAAAA,EAAA,M,QAFiE,UAEjE,O,yCAIJ,IAmDU,EAnDVrC,EAAAA,EAAAA,IAmDUsC,EAAA,C,QAlDJ,iBAAJhH,IAAIG,EACH8G,MAAO7G,EACP8G,MAAOnG,EACR,cAAY,S,kBAEZ,IAEe,EAFf2D,EAAAA,EAAAA,IAEeyC,EAAA,CAFDC,MAAM,MAAMC,KAAK,Y,kBAC7B,IAAoD,EAApD3C,EAAAA,EAAAA,IAAoD4C,EAAA,C,WAAjClH,EAAYE,S,qCAAZF,EAAYE,SAAQiH,GAAEC,SAAA,I,gCAG3C9C,EAAAA,EAAAA,IAEeyC,EAAA,CAFDC,MAAM,KAAKC,KAAK,S,kBAC5B,IAAwC,EAAxC3C,EAAAA,EAAAA,IAAwC4C,EAAA,C,WAArBlH,EAAYG,M,qCAAZH,EAAYG,MAAKgH,I,gCAGtC7C,EAAAA,EAAAA,IAEeyC,EAAA,CAFDC,MAAM,OAAOC,KAAK,e,kBAC9B,IAAoE,EAApE3C,EAAAA,EAAAA,IAAoE4C,EAAA,C,WAAjDlH,EAAYI,Y,qCAAZJ,EAAYI,YAAW+G,GAAEE,YAAY,W,gCAG1D/C,EAAAA,EAAAA,IAEeyC,EAAA,CAFDC,MAAM,QAAQC,KAAK,a,kBAC/B,IAAmE,EAAnE3C,EAAAA,EAAAA,IAAmE4C,EAAA,C,WAAhDlH,EAAYK,U,qCAAZL,EAAYK,UAAS8G,GAAEE,YAAY,Y,gCAGxD/C,EAAAA,EAAAA,IAAckB,G,eAEdX,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRP,EAAAA,EAAAA,IAOeyC,EAAA,CAPDC,MAAM,OAAOC,KAAK,mB,kBAC9B,IAKE,EALF3C,EAAAA,EAAAA,IAKE4C,EAAA,C,WAJSlH,EAAYM,gB,qCAAZN,EAAYM,gBAAe6G,GACpCpG,KAAK,WACLsG,YAAY,UACZ,oB,gCAIJ/C,EAAAA,EAAAA,IAOeyC,EAAA,CAPDC,MAAM,MAAMC,KAAK,e,kBAC7B,IAKE,EALF3C,EAAAA,EAAAA,IAKE4C,EAAA,C,WAJSlH,EAAYO,Y,qCAAZP,EAAYO,YAAW4G,GAChCpG,KAAK,WACLsG,YAAY,SACZ,oB,gCAIJ/C,EAAAA,EAAAA,IAOeyC,EAAA,CAPDC,MAAM,OAAOC,KAAK,mB,kBAC9B,IAKE,EALF3C,EAAAA,EAAAA,IAKE4C,EAAA,C,WAJSlH,EAAYQ,gB,qCAAZR,EAAYQ,gBAAe2G,GACpCpG,KAAK,WACLsG,YAAY,SACZ,oB,0FC3FhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,wSCNO,SAAS7E,EAAY8E,GAC1B,OAAOhE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,cACLC,OAAQ,MACRF,UAEJ,CAEO,SAASG,EAAWxD,EAAMyD,GAC/B,OAAOpE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,gBACLC,OAAQ,OACRvD,OACAyD,mBACAC,QAAS,KAEb,CAEO,SAASC,EAAaC,GAC3B,OAAOvE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,mBAAmBM,IACxBL,OAAQ,MACRM,aAAc,QAElB,CAEO,SAASC,EAAWF,GACzB,OAAOvE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,UAAUM,IACfL,OAAQ,UAEZ,CAEO,SAASQ,EAAWH,EAAII,GAC7B,OAAO3E,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,UAAUM,WACfL,OAAQ,MACRvD,KAAM,CAAEgE,SAEZ,CAkBO,SAASC,EAAYC,GAC1B,OAAO7E,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,gBACLC,OAAQ,MACRF,OAAQ,CAAEa,YAEd,CAUO,SAASC,IACd,OAAO9E,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,qBACLC,OAAQ,OAEZ,CAEO,SAASa,EAAYR,GAC1B,OAAOvE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,UAAUM,YACfL,OAAQ,OAEZ,CAEO,SAASc,EAAoBT,GAClC,OAAOvE,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,sBAAsBM,IAC3BL,OAAQ,UAEZ,CAEO,SAASe,IACd,OAAOjF,EAAAA,EAAAA,GAAQ,CACbiE,IAAK,2BACLC,OAAQ,UAEZ,C","sources":["webpack://enterprise-file-manager-frontend/./src/views/Profile.vue","webpack://enterprise-file-manager-frontend/./src/views/Profile.vue?24e8","webpack://enterprise-file-manager-frontend/./src/api/file.js"],"sourcesContent":["<template>\n  <div class=\"profile-container\">\n    <el-row :gutter=\"20\">\n      <!-- 左侧用户信息 -->\n      <el-col :span=\"8\">\n        <el-card class=\"user-info-card\">\n          <div class=\"user-avatar\">\n            <el-avatar :size=\"100\" :src=\"user?.avatarUrl\">\n              <el-icon><User /></el-icon>\n            </el-avatar>\n            <div class=\"user-name\">{{ user?.displayName || user?.username }}</div>\n            <div class=\"user-role\">{{ user?.role || 'USER' }}</div>\n          </div>\n          \n          <el-divider />\n          \n          <div class=\"user-stats\">\n            <div class=\"stat-item\">\n              <div class=\"stat-label\">注册时间</div>\n              <div class=\"stat-value\">{{ formatDateTime(user?.createTime) }}</div>\n            </div>\n            <div class=\"stat-item\">\n              <div class=\"stat-label\">最后登录</div>\n              <div class=\"stat-value\">{{ formatDateTime(user?.lastLoginTime) }}</div>\n            </div>\n            <div class=\"stat-item\">\n              <div class=\"stat-label\">存储配额</div>\n              <div class=\"stat-value\">{{ formatStorage(user?.quotaLimit || 1024 * 1024 * 1024) }}</div>\n            </div>\n            <div class=\"stat-item\">\n              <div class=\"stat-label\">已用存储</div>\n              <div class=\"stat-value\">{{ formatStorage(userStats.usedStorage || 0) }}</div>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n      \n      <!-- 右侧编辑区域 -->\n      <el-col :span=\"16\">\n        <el-card class=\"profile-edit-card\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>个人信息</span>\n              <el-button type=\"primary\" @click=\"saveProfile\" :loading=\"saving\">\n                保存修改\n              </el-button>\n            </div>\n          </template>\n          \n          <el-form\n            ref=\"profileFormRef\"\n            :model=\"profileForm\"\n            :rules=\"profileRules\"\n            label-width=\"100px\"\n          >\n            <el-form-item label=\"用户名\" prop=\"username\">\n              <el-input v-model=\"profileForm.username\" disabled />\n            </el-form-item>\n            \n            <el-form-item label=\"邮箱\" prop=\"email\">\n              <el-input v-model=\"profileForm.email\" />\n            </el-form-item>\n            \n            <el-form-item label=\"显示名称\" prop=\"displayName\">\n              <el-input v-model=\"profileForm.displayName\" placeholder=\"请输入显示名称\" />\n            </el-form-item>\n            \n            <el-form-item label=\"头像URL\" prop=\"avatarUrl\">\n              <el-input v-model=\"profileForm.avatarUrl\" placeholder=\"请输入头像URL\" />\n            </el-form-item>\n            \n            <el-divider />\n            \n            <h3>修改密码</h3>\n            <el-form-item label=\"当前密码\" prop=\"currentPassword\">\n              <el-input\n                v-model=\"profileForm.currentPassword\"\n                type=\"password\"\n                placeholder=\"请输入当前密码\"\n                show-password\n              />\n            </el-form-item>\n            \n            <el-form-item label=\"新密码\" prop=\"newPassword\">\n              <el-input\n                v-model=\"profileForm.newPassword\"\n                type=\"password\"\n                placeholder=\"请输入新密码\"\n                show-password\n              />\n            </el-form-item>\n            \n            <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n              <el-input\n                v-model=\"profileForm.confirmPassword\"\n                type=\"password\"\n                placeholder=\"请确认新密码\"\n                show-password\n              />\n            </el-form-item>\n          </el-form>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, computed } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { User } from '@element-plus/icons-vue'\nimport { useAuthStore } from '@/store/auth'\nimport { getFileList } from '@/api/file'\nimport request from '@/utils/request'\n\nconst authStore = useAuthStore()\n\nconst saving = ref(false)\nconst loading = ref(false)\nconst userStats = ref({\n  usedStorage: 0\n})\n\nconst profileFormRef = ref()\nconst profileForm = reactive({\n  username: '',\n  email: '',\n  displayName: '',\n  avatarUrl: '',\n  currentPassword: '',\n  newPassword: '',\n  confirmPassword: ''\n})\n\nconst user = computed(() => authStore.user)\n\nconst profileRules = {\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n  ],\n  displayName: [\n    { required: true, message: '请输入显示名称', trigger: 'blur' },\n    { min: 2, max: 50, message: '显示名称长度在2-50个字符', trigger: 'blur' }\n  ],\n  currentPassword: [\n    { required: true, message: '请输入当前密码', trigger: 'blur' }\n  ],\n  newPassword: [\n    { min: 6, max: 20, message: '密码长度在6-20个字符', trigger: 'blur' }\n  ],\n  confirmPassword: [\n    { \n      validator: (rule, value, callback) => {\n        if (value && value !== profileForm.newPassword) {\n          callback(new Error('两次输入密码不一致'))\n        } else {\n          callback()\n        }\n      },\n      trigger: 'blur'\n    }\n  ]\n}\n\n// 格式化存储大小\nconst formatStorage = (bytes) => {\n  if (!bytes) return '0 B'\n  const k = 1024\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// 格式化日期时间\nconst formatDateTime = (datetime) => {\n  if (!datetime) return '未设置'\n  return new Date(datetime).toLocaleString()\n}\n\n// 加载用户统计信息\nconst loadUserStats = async () => {\n  try {\n    const response = await getFileList()\n    const files = response || []\n    userStats.value = {\n      usedStorage: files.reduce((sum, file) => sum + (file.size || 0), 0)\n    }\n  } catch (error) {\n    console.error('加载用户统计信息失败:', error)\n  }\n}\n\n// 初始化表单数据\nconst initProfileForm = () => {\n  if (user.value) {\n    profileForm.username = user.value.username\n    profileForm.email = user.value.email\n    profileForm.displayName = user.value.displayName\n    profileForm.avatarUrl = user.value.avatarUrl\n  }\n}\n\n// 保存个人信息\nconst saveProfile = async () => {\n  if (!profileFormRef.value) return\n  \n  await profileFormRef.value.validate(async (valid) => {\n    if (valid) {\n      saving.value = true\n      try {\n        // 检查是否已登录\n        if (!authStore.isAuthenticated) {\n          throw new Error('请先登录')\n        }\n        \n        // 更新用户信息\n        const profileData = {\n          displayName: profileForm.displayName,\n          email: profileForm.email,\n          avatarUrl: profileForm.avatarUrl\n        }\n        \n        // 使用request工具发送请求，会自动添加token\n        const response = await request.put('/auth/profile', profileData)\n        \n        // 如果修改了密码，调用密码修改API\n        if (profileForm.newPassword) {\n          await request.post('/auth/change-password', {\n            oldPassword: profileForm.currentPassword,\n            newPassword: profileForm.newPassword\n          })\n          \n          ElMessage.success('个人信息和密码更新成功，请重新登录')\n          authStore.logout()\n          window.location.href = '/login'\n        } else {\n          ElMessage.success('个人信息更新成功')\n          // 刷新用户信息\n          await authStore.fetchUserInfo()\n        }\n        \n        // 清空密码字段\n        profileForm.currentPassword = ''\n        profileForm.newPassword = ''\n        profileForm.confirmPassword = ''\n        \n      } catch (error) {\n        console.error('保存失败:', error)\n        ElMessage.error(error.response?.data?.message || error.message || '保存失败')\n      } finally {\n        saving.value = false\n      }\n    }\n  })\n}\n\nonMounted(async () => {\n  // 确保用户信息已加载\n  if (!authStore.user && authStore.isAuthenticated) {\n    try {\n      await authStore.fetchUserInfo()\n    } catch (error) {\n      console.error('获取用户信息失败:', error)\n      ElMessage.error('获取用户信息失败，请重新登录')\n      return\n    }\n  }\n  \n  initProfileForm()\n  loadUserStats()\n})\n</script>\n\n<style scoped>\n.profile-container {\n  padding: 20px;\n}\n\n.user-info-card {\n  text-align: center;\n}\n\n.user-avatar {\n  padding: 20px 0;\n}\n\n.user-name {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0 5px 0;\n  color: #333;\n}\n\n.user-role {\n  color: #666;\n  font-size: 14px;\n  padding: 2px 8px;\n  background: #f0f0f0;\n  border-radius: 12px;\n  display: inline-block;\n}\n\n.user-stats {\n  text-align: left;\n  padding: 0 20px;\n}\n\n.stat-item {\n  margin-bottom: 15px;\n}\n\n.stat-label {\n  color: #666;\n  font-size: 14px;\n  margin-bottom: 5px;\n}\n\n.stat-value {\n  color: #333;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.profile-edit-card {\n  min-height: 500px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n:deep(.el-form-item__content) {\n  max-width: 400px;\n}\n\n:deep(.el-divider) {\n  margin: 20px 0;\n}\n\nh3 {\n  margin: 20px 0 15px 0;\n  color: #333;\n  font-size: 16px;\n}\n</style>\n","import script from \"./Profile.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=40326460&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-40326460\"]])\n\nexport default __exports__","import request from \"@/utils/request\"\n\nexport function getFileList(params) {\n  return request({\n    url: \"/files/list\",\n    method: \"get\",\n    params\n  })\n}\n\nexport function uploadFile(data, onUploadProgress) {\n  return request({\n    url: \"/files/upload\",\n    method: \"post\",\n    data,\n    onUploadProgress,\n    timeout: 300000\n  })\n}\n\nexport function downloadFile(id) {\n  return request({\n    url: `/files/download/${id}`,\n    method: \"get\",\n    responseType: \"blob\"\n  })\n}\n\nexport function deleteFile(id) {\n  return request({\n    url: `/files/${id}`,\n    method: \"delete\"\n  })\n}\n\nexport function renameFile(id, name) {\n  return request({\n    url: `/files/${id}/rename`,\n    method: \"put\",\n    data: { name }\n  })\n}\n\nexport function moveFile(id, folderId) {\n  return request({\n    url: `/files/${id}/move`,\n    method: \"post\",\n    data: { folderId }\n  })\n}\n\nexport function copyFile(id, folderId) {\n  return request({\n    url: `/files/${id}/copy`,\n    method: \"post\",\n    data: { folderId }\n  })\n}\n\nexport function searchFiles(keyword) {\n  return request({\n    url: \"/files/search\",\n    method: \"get\",\n    params: { keyword }\n  })\n}\n\nexport function getFileThumbnail(id) {\n  return request({\n    url: `/files/thumbnail/${id}`,\n    method: \"get\",\n    responseType: \"blob\"\n  })\n}\n\nexport function getRecycleBinFiles() {\n  return request({\n    url: \"/files/recycle/bin\",\n    method: \"get\"\n  })\n}\n\nexport function restoreFile(id) {\n  return request({\n    url: `/files/${id}/restore`,\n    method: \"put\"\n  })\n}\n\nexport function permanentDeleteFile(id) {\n  return request({\n    url: `/files/recycle/bin/${id}`,\n    method: \"delete\"\n  })\n}\n\nexport function emptyRecycleBin() {\n  return request({\n    url: \"/files/recycle/bin/empty\",\n    method: \"delete\"\n  })\n}\n"],"names":["authStore","useAuthStore","saving","ref","userStats","usedStorage","profileFormRef","profileForm","reactive","username","email","displayName","avatarUrl","currentPassword","newPassword","confirmPassword","user","computed","profileRules","required","message","trigger","type","min","max","validator","rule","value","callback","Error","formatStorage","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","formatDateTime","datetime","Date","toLocaleString","loadUserStats","async","response","getFileList","files","reduce","sum","file","size","error","console","initProfileForm","saveProfile","validate","valid","isAuthenticated","profileData","request","put","post","oldPassword","ElMessage","success","logout","window","location","href","fetchUserInfo","data","onMounted","_createElementBlock","_hoisted_1","_createVNode","_component_el_row","gutter","_component_el_col","span","_component_el_card","class","_createElementVNode","_hoisted_2","_component_el_avatar","src","_component_el_icon","_unref","User","_hoisted_3","_toDisplayString","_hoisted_4","role","_component_el_divider","_hoisted_5","_hoisted_6","_hoisted_7","createTime","_hoisted_8","_hoisted_9","lastLoginTime","_hoisted_10","_hoisted_11","quotaLimit","_hoisted_12","_hoisted_13","header","_withCtx","_hoisted_14","_component_el_button","onClick","loading","_cache","_component_el_form","model","rules","_component_el_form_item","label","prop","_component_el_input","$event","disabled","placeholder","__exports__","params","url","method","uploadFile","onUploadProgress","timeout","downloadFile","id","responseType","deleteFile","renameFile","name","searchFiles","keyword","getRecycleBinFiles","restoreFile","permanentDeleteFile","emptyRecycleBin"],"sourceRoot":""}