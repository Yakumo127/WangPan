{"version":3,"file":"js/166.22ca94c0.js","mappings":"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","sources":["webpack://enterprise-file-manager-frontend/./src/api/admin.js","webpack://enterprise-file-manager-frontend/./src/views/admin/Users.vue","webpack://enterprise-file-manager-frontend/./src/views/admin/Users.vue?1830"],"sourcesContent":["import request from \"@/utils/request\"\n\nexport function getUserList(params) {\n  return request({\n    url: \"/admin/users\",\n    method: \"get\",\n    params\n  })\n}\n\nexport function createUser(data) {\n  return request({\n    url: \"/admin/users\",\n    method: \"post\",\n    data\n  })\n}\n\nexport function updateUser(id, data) {\n  return request({\n    url: `/admin/users/${id}`,\n    method: \"put\",\n    data\n  })\n}\n\nexport function deleteUser(id) {\n  return request({\n    url: `/admin/users/${id}`,\n    method: \"delete\"\n  })\n}\n\nexport function importUsers(file) {\n  const formData = new FormData()\n  formData.append(\"file\", file)\n  return request({\n    url: \"/admin/users/import\",\n    method: \"post\",\n    data: formData,\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  })\n}\n\nexport function exportUsers(params) {\n  return request({\n    url: \"/admin/users/export\",\n    method: \"get\",\n    params,\n    responseType: \"blob\"\n  })\n}\n\nexport function searchUsers(keyword) {\n  return request({\n    url: \"/admin/users/search\",\n    method: \"get\",\n    params: { keyword }\n  })\n}\n","<template>\n  <div class=\"users-container\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>用户管理</span>\n        </div>\n      </template>\n      \n      <!-- 搜索和操作栏 -->\n      <div class=\"operation-bar\">\n        <el-input\n          v-model=\"searchKeyword\"\n          placeholder=\"搜索用户名或邮箱\"\n          style=\"width: 200px;\"\n          clearable\n        >\n          <template #prefix>\n            <el-icon><Search /></el-icon>\n          </template>\n        </el-input>\n        <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\n        <el-button type=\"success\" @click=\"handleAdd\">添加用户</el-button>\n        <el-button type=\"warning\" @click=\"handleImport\">导入</el-button>\n        <el-button type=\"info\" @click=\"handleExport\">导出</el-button>\n      </div>\n\n      <!-- 用户表格 -->\n      <el-table :data=\"userList\" style=\"width: 100%\" v-loading=\"loading\">\n        <el-table-column prop=\"username\" label=\"用户名\" width=\"120\" />\n        <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\" />\n        <el-table-column prop=\"displayName\" label=\"显示名称\" width=\"120\" />\n        <el-table-column prop=\"role\" label=\"角色\" width=\"100\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.role === 'ADMIN' ? 'danger' : 'primary'\">\n              {{ row.role === 'ADMIN' ? '管理员' : '用户' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"enabled\" label=\"状态\" width=\"100\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"row.enabled ? 'success' : 'info'\">\n              {{ row.enabled ? '激活' : '未激活' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\" />\n        <el-table-column prop=\"lastLoginTime\" label=\"最后登录\" width=\"180\" />\n        <el-table-column label=\"操作\" width=\"200\">\n          <template #default=\"{ row }\">\n            <el-button size=\"small\" @click=\"handleEdit(row)\">编辑</el-button>\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <div class=\"pagination\">\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :total=\"total\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n    </el-card>\n\n    <!-- 用户表单对话框 -->\n    <el-dialog\n      v-model=\"dialogVisible\"\n      :title=\"dialogTitle\"\n      width=\"500px\"\n    >\n      <el-form\n        ref=\"userFormRef\"\n        :model=\"userForm\"\n        :rules=\"userRules\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"userForm.username\" />\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input v-model=\"userForm.email\" />\n        </el-form-item>\n        <el-form-item label=\"显示名称\" prop=\"displayName\">\n          <el-input v-model=\"userForm.displayName\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"!userForm.id\">\n          <el-input v-model=\"userForm.password\" type=\"password\" />\n        </el-form-item>\n        <el-form-item label=\"角色\" prop=\"role\">\n          <el-select v-model=\"userForm.role\" style=\"width: 100%\">\n            <el-option label=\"用户\" value=\"USER\" />\n            <el-option label=\"管理员\" value=\"ADMIN\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"enabled\">\n          <el-switch v-model=\"userForm.enabled\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"handleSave\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n\n    <!-- 导入对话框 -->\n    <el-dialog\n      v-model=\"importDialogVisible\"\n      title=\"导入用户\"\n      width=\"400px\"\n    >\n      <el-upload\n        ref=\"uploadRef\"\n        class=\"upload-demo\"\n        drag\n        :auto-upload=\"false\"\n        :limit=\"1\"\n        accept=\".xlsx,.xls\"\n        @change=\"handleFileChange\"\n      >\n        <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n        <div class=\"el-upload__text\">\n          拖拽文件到此处或 <em>点击上传</em>\n        </div>\n        <template #tip>\n          <div class=\"el-upload__tip\">\n            只能上传xlsx/xls文件\n          </div>\n        </template>\n      </el-upload>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"importDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"handleImportSubmit\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, UploadFilled } from '@element-plus/icons-vue'\nimport { getUserList, createUser, updateUser, deleteUser, importUsers, exportUsers } from '@/api/admin'\n\n// 数据定义\nconst userList = ref([])\nconst loading = ref(false)\nconst searchKeyword = ref('')\nconst currentPage = ref(1)\nconst pageSize = ref(10)\nconst total = ref(0)\nconst dialogVisible = ref(false)\nconst dialogTitle = ref('')\nconst importDialogVisible = ref(false)\nconst uploadFile = ref(null)\n\n// 表单数据\nconst userForm = reactive({\n  id: null,\n  username: '',\n  email: '',\n  displayName: '',\n  password: '',\n  role: 'USER',\n  enabled: true\n})\n\n// 表单验证规则\nconst userRules = {\n  username: [\n    { required: true, message: '请输入用户名', trigger: 'blur' },\n    { min: 3, max: 20, message: '用户名长度在3到20个字符', trigger: 'blur' }\n  ],\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n  ],\n  displayName: [\n    { required: true, message: '请输入显示名称', trigger: 'blur' }\n  ],\n  password: [\n    { required: true, message: '请输入密码', trigger: 'blur' },\n    { min: 6, max: 20, message: '密码长度在6到20个字符', trigger: 'blur' }\n  ],\n  role: [\n    { required: true, message: '请选择角色', trigger: 'change' }\n  ]\n}\n\nconst userFormRef = ref()\nconst uploadRef = ref()\n\n// 加载用户列表\nconst loadUserList = async () => {\n  loading.value = true\n  try {\n    const params = {\n      page: currentPage.value,\n      size: pageSize.value,\n      keyword: searchKeyword.value\n    }\n    const response = await getUserList(params)\n    console.log('API Response:', response) // 调试日志\n    // 后端直接返回数组，所以需要处理数据格式\n    if (Array.isArray(response)) {\n      userList.value = response\n      total.value = response.length\n    } else if (response.data) {\n      userList.value = response.data\n      total.value = response.total || response.data.length\n    } else {\n      userList.value = []\n      total.value = 0\n    }\n  } catch (error) {\n    console.error('加载用户列表失败:', error)\n    ElMessage.error('加载用户列表失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 搜索用户\nconst handleSearch = async () => {\n  console.log('搜索用户:', searchKeyword.value) // 调试日志\n  currentPage.value = 1\n  await loadUserList()\n}\n\n// 添加用户\nconst handleAdd = () => {\n  dialogTitle.value = '添加用户'\n  Object.assign(userForm, {\n    id: null,\n    username: '',\n    email: '',\n    displayName: '',\n    password: '',\n    role: 'USER',\n    enabled: true\n  })\n  dialogVisible.value = true\n}\n\n// 编辑用户\nconst handleEdit = (row) => {\n  dialogTitle.value = '编辑用户'\n  Object.assign(userForm, row)\n  userForm.password = ''\n  dialogVisible.value = true\n}\n\n// 保存用户\nconst handleSave = async () => {\n  if (!userFormRef.value) return\n  \n  await userFormRef.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        if (userForm.id) {\n          await updateUser(userForm.id, userForm)\n          ElMessage.success('用户更新成功')\n        } else {\n          await createUser(userForm)\n          ElMessage.success('用户创建成功')\n        }\n        dialogVisible.value = false\n        await loadUserList()\n      } catch (error) {\n        ElMessage.error('操作失败：' + error.message)\n      }\n    }\n  })\n}\n\n// 删除用户\nconst handleDelete = async (row) => {\n  try {\n    await ElMessageBox.confirm(\n      `确定要删除用户 \"${row.username}\" 吗？`,\n      '确认删除',\n      {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n    \n    await deleteUser(row.id)\n    ElMessage.success('用户删除成功')\n    await loadUserList()\n  } catch (error) {\n    if (error !== 'cancel') {\n      ElMessage.error('删除失败：' + error.message)\n    }\n  }\n}\n\n// 导入用户\nconst handleImport = () => {\n  importDialogVisible.value = true\n  uploadFile.value = null\n}\n\n// 文件变化\nconst handleFileChange = (file) => {\n  uploadFile.value = file.raw\n}\n\n// 提交导入\nconst handleImportSubmit = async () => {\n  if (!uploadFile.value) {\n    ElMessage.warning('请选择要导入的文件')\n    return\n  }\n  \n  try {\n    await importUsers(uploadFile.value)\n    ElMessage.success('用户导入成功')\n    importDialogVisible.value = false\n    await loadUserList()\n  } catch (error) {\n    ElMessage.error('导入失败：' + error.message)\n  }\n}\n\n// 导出用户\nconst handleExport = async () => {\n  try {\n    const response = await exportUsers()\n    const blob = new Blob([response], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' })\n    const url = window.URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = '用户列表.xlsx'\n    a.click()\n    window.URL.revokeObjectURL(url)\n    ElMessage.success('用户导出成功')\n  } catch (error) {\n    ElMessage.error('导出失败：' + error.message)\n  }\n}\n\n// 分页处理\nconst handleSizeChange = (val) => {\n  console.log('页面大小改变:', val) // 调试日志\n  pageSize.value = val\n  currentPage.value = 1\n  loadUserList()\n}\n\nconst handleCurrentChange = (val) => {\n  console.log('当前页改变:', val) // 调试日志\n  currentPage.value = val\n  loadUserList()\n}\n\n// 页面加载时初始化\nonMounted(() => {\n  console.log('Users.vue 组件挂载，开始加载用户列表') // 调试日志\n  loadUserList()\n})\n</script>\n\n<style scoped>\n.users-container {\n  padding: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.operation-bar {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.upload-demo {\n  text-align: center;\n}\n</style>","import script from \"./Users.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Users.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=0b8884b9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0b8884b9\"]])\n\nexport default __exports__"],"names":["getUserList","params","request","url","method","createUser","data","updateUser","id","deleteUser","importUsers","file","formData","FormData","append","headers","exportUsers","responseType","userList","ref","loading","searchKeyword","currentPage","pageSize","total","dialogVisible","dialogTitle","importDialogVisible","uploadFile","userForm","reactive","username","email","displayName","password","role","enabled","userRules","required","message","trigger","min","max","type","userFormRef","uploadRef","loadUserList","async","value","page","size","keyword","response","console","log","Array","isArray","length","error","ElMessage","handleSearch","handleAdd","Object","assign","handleEdit","row","handleSave","validate","valid","success","handleDelete","ElMessageBox","confirm","confirmButtonText","cancelButtonText","handleImport","handleFileChange","raw","handleImportSubmit","warning","handleExport","blob","Blob","window","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","handleSizeChange","val","handleCurrentChange","onMounted","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","class","header","_withCtx","_cache","_createElementVNode","_hoisted_2","_component_el_input","$event","placeholder","style","clearable","prefix","_component_el_icon","_unref","Search","_component_el_button","onClick","_createBlock","_component_el_table","_component_el_table_column","prop","label","width","default","_component_el_tag","_hoisted_3","_component_el_pagination","layout","onSizeChange","onCurrentChange","_component_el_dialog","title","footer","_hoisted_4","_component_el_form","model","rules","_component_el_form_item","_component_el_select","_component_el_option","_component_el_switch","_hoisted_5","_component_el_upload","drag","limit","accept","onChange","tip","UploadFilled","__exports__"],"sourceRoot":""}